<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Szyba Kominkowa na Wymiar | Kalkulator Ceny Online</title>
    <meta name="description" content="Oblicz cenƒô szyby kominkowej na wymiar za pomocƒÖ naszego kalkulatora online. Podaj wymiary, poznaj koszt i zam√≥w z dostawƒÖ. Szybko i bezpiecznie.">
    <meta name="keywords" content="szyba kominkowa, szk≈Ço kominkowe, na wymiar, kalkulator ceny, ≈ºaroodporna, do kominka">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/css/lightgallery.min.css"/>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; margin: 0; background-color: #f8f9fa; color: #333; }
        .container { max-width: 1100px; margin: 40px auto; padding: 20px; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; background-color: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.07); }
        .main-image { width: 100%; height: auto; border-radius: 8px; margin-bottom: 15px; border: 1px solid #eee; cursor: pointer; }
        .thumbnails { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
        .thumbnails img { width: 100%; border-radius: 4px; cursor: pointer; border: 2px solid #ddd; transition: all 0.2s; aspect-ratio: 1 / 1; object-fit: cover; }
        .thumbnails img:hover, .thumbnails img.active { border-color: #1abc9c; transform: scale(1.05); }
        .product-info h1 { font-size: 2.4em; margin-top: 0; line-height: 1.2; font-weight: 700; }
        .shipping-info { margin-top: 20px; background-color: #f8f9fa; padding: 15px; border-radius: 8px; }
        .shipping-info h3 { margin: 0; font-size: 1.2em; color: #2c3e50; }
        .shipping-info-toggle { font-size: 0.9em; color: #3498db; cursor: pointer; text-decoration: underline; }
        .shipping-details { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out, margin-top 0.5s ease-in-out; }
        .shipping-details.expanded { max-height: 500px; margin-top: 15px; }
        .description { font-size: 1.1em; line-height: 1.7; color: #555; max-height: 125px; overflow: hidden; position: relative; transition: max-height 0.5s ease-in-out; }
        .description.expanded { max-height: 1500px; }
        .read-more-btn { background: none; border: none; color: #1abc9c; cursor: pointer; font-weight: bold; padding: 10px 0; display: block; margin-top: 10px; font-size: 1em; }
        .trust-badges { display: flex; justify-content: space-around; margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; }
        .badge { text-align: center; font-size: 0.9em; color: #777; }
        .badge-icon { font-size: 2em; margin-bottom: 8px; }
        .question-section { text-align: center; margin-top: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 8px; }
        .question-btn { background: none; border: 2px solid #3498db; color: #3498db; padding: 10px 20px; font-size: 1.1em; font-weight: bold; border-radius: 5px; cursor: pointer; transition: all 0.3s; }
        .question-btn:hover { background-color: #3498db; color: white; }
        .footer_section { text-align: center; margin-top: 40px; padding-top: 20px; font-size: 0.9em; color: #777; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); animation: fadeIn 0.3s; }
        .modal-content { background-color: #fefefe; margin: 10% auto; padding: 30px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 10px; position: relative; }
        .close-btn { color: #aaa; float: right; font-size: 28px; font-weight: bold; position: absolute; top: 10px; right: 20px; }
        .close-btn:hover, .close-btn:focus { color: black; text-decoration: none; cursor: pointer; }
        .modal-content h2 { margin-top: 0; }
        .modal-content input, .modal-content textarea { width: 100%; padding: 12px; margin: 8px 0; display: inline-block; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
        @media (max-width: 900px) { .product-grid { grid-template-columns: 1fr; } }
        #lightgallery-links { display: none; }
        .calculator-container { background-color: #f8f9fa; padding: 25px; border-radius: 12px; text-align: center; margin-top: 30px; border: 1px solid #eee; }
        .calculator-container h1 { color: #2c3e50; font-size: 1.8em; margin-bottom: 15px; margin-top: 0; }
        .calculator-container p { font-size: 0.9em; line-height: 1.5; }
        .calculator-container label { display: block; text-align: left; margin-top: 15px; margin-bottom: 5px; font-weight: bold; }
        .calculator-container input[type="number"] { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 1em; }
        .calculator-container button { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; padding: 15px; text-align: center; text-decoration: none; font-size: 1.2em; font-weight: bold; border-radius: 8px; transition: transform 0.2s, box-shadow 0.2s; border: none; cursor: pointer; min-height: 50px; box-sizing: border-box; background: #ff6600; color: white; margin-top: 20px; }
        .calculator-container button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255, 102, 0, 0.4); background: #e65c00; }
        #wynik { margin-top: 20px; padding: 15px; border-radius: 8px; font-weight: bold; text-align: center; line-height: 1.6; display: none; }
        .wynik-ok { background-color: #e6ffe6; color: #16a085; border: 1px solid #16a085; }
        .wynik-error { background-color: #ffe6e6; color: red; border: 1px solid red; }
        .buy-button-dynamic { display: block; background: linear-gradient(145deg, #1abc9c, #16a085); color: white; padding: 15px; text-decoration: none; border-radius: 8px; font-size: 1.2em; font-weight: bold; margin-top: 15px; transition: all 0.2s; }
        .buy-button-dynamic:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(22, 160, 133, 0.3); }
        .buy-button-disabled { background: #ccc !important; pointer-events: none; cursor: not-allowed; }
    </style>

    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '2369850443532061');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=2369850443532061&ev=PageView&noscript=1"
    /></noscript>
</head>
<body>
    <div class="container">
        <div class="product-grid">
            <div class="gallery-container">
                <img src="images/szyba1.jpg" alt="Szyba kominkowa na wymiar" id="mainImage" class="main-image" onclick="openGallery(0)">
                <div class="thumbnails">
                    <img src="images/szyba1.jpg" alt="Szyba do kominka - zbli≈ºenie" onclick="changeImage('images/szyba1.jpg', this, 0)">
                    <img src="images/szyba2.jpg" alt="Szk≈Ço ≈ºaroodporne do kominka" onclick="changeImage('images/szyba2.jpg', this, 1)">
                    <img src="images/szyba3.jpg" alt="Szyba kominkowa na zam√≥wienie" onclick="changeImage('images/szyba3.jpg', this, 2)">
                    <img src="images/szyba4.jpg" alt="Czysta szyba w kominku" onclick="changeImage('images/szyba4.jpg', this, 3)">
                </div>
            </div>

            <div class="product-info">
                <h1>Pogotowie Kominkowe: Szybka Pomoc w Razie St≈Çuczonej Szyby</h1>
                
                <div class="shipping-info">
                    <h3>üöö Pancerna Paczka do Paczkomatu 24/7</h3>
                    <span class="shipping-info-toggle" onclick="toggleShippingDetails()">(Wiƒôcej informacji)</span>
                    <div class="shipping-details" id="shippingDetails">
                        <p>Twoja nowa szyba zostanie pancernie zapakowana i nadana w ciƒÖgu 1-2 dni roboczych do wybranego przez Ciebie Paczkomatu. Po op≈Çaceniu zam√≥wienia otrzymasz e-mail z potwierdzeniem, a nastƒôpnie link do ≈õledzenia przesy≈Çki. Gdy paczka dotrze na miejsce, InPost powiadomi Ciƒô SMS-em i e-mailem. Odbierasz, kiedy chcesz ‚Äì wygodnie i bez czekania na kuriera!</p>
                    </div>
                </div>

                <div class="description" id="productDescription">
                    <p><p>Uszkodzona szyba kominkowa? Zaufaj profesjonalistom i przywr√≥ƒá pe≈ÇnƒÖ sprawno≈õƒá kominka.</p>
<p>Pƒôkniƒôcie szyby nie musi oznaczaƒá kosztownych i skomplikowanych napraw. Oferujemy precyzyjnie dociƒôte na wymiar, certyfikowane szk≈Ço kominkowe, kt√≥re gwarantuje bezpiecze≈Ñstwo i doskona≈ÇƒÖ widoczno≈õƒá ognia na lata.</p>

<p><b>Nasze zobowiƒÖzanie ‚Äì Twoja pewno≈õƒá i satysfakcja:</b></p>
<p>üõ°Ô∏è <b>Gwarancja Bezpiecznej Dostawy:</b> Rozumiemy obawy zwiƒÖzane z transportem szk≈Ça. Dlatego ka≈ºdƒÖ szybƒô zabezpieczamy przy u≈ºyciu specjalistycznych materia≈Ç√≥w. Bierzemy pe≈ÇnƒÖ odpowiedzialno≈õƒá za przesy≈Çkƒô ‚Äì w przypadku stwierdzenia jakichkolwiek uszkodze≈Ñ przy odbiorze, bezzw≈Çocznie realizujemy nowe zam√≥wienie na nasz koszt.</p>

<p><b>Co wyr√≥≈ºnia nasz produkt?</b></p>
<ul>
    <li><b>Certyfikowana Odporno≈õƒá Termiczna do 800¬∞C:</b> Stosujemy wy≈ÇƒÖcznie szk≈Ço ceramiczne o potwierdzonej odporno≈õci na szok termiczny, co zapewnia maksymalne bezpiecze≈Ñstwo u≈ºytkowania.</li>
    <li><b>Precyzja wykonania:</b> Ka≈ºda szyba jest docinana z milimetrowƒÖ dok≈Çadno≈õciƒÖ zgodnie ze specyfikacjƒÖ klienta. Krawƒôdzie poddajemy profesjonalnemu szlifowaniu, aby zapewniƒá bezpieczny monta≈º.</li>
    <li><b>Niezak≈Ç√≥cona estetyka:</b> Idealnie przejrzysta, dwustronnie polerowana powierzchnia szk≈Ça pozwala w pe≈Çni cieszyƒá siƒô widokiem p≈Çomieni.</li>
</ul>

<p><b>üéÅ W cenie zam√≥wienia otrzymujesz kompletny pakiet monta≈ºowy:</b><br>
Do ka≈ºdej szyby do≈ÇƒÖczamy bezp≈Çatnie zestaw akcesori√≥w: specjalistycznƒÖ ta≈õmƒô monta≈ºowƒÖ oraz podk≈Çadki pod zaciski, kt√≥re niwelujƒÖ naprƒô≈ºenia i wyd≈Çu≈ºajƒÖ ≈ºywotno≈õƒá szk≈Ça.</p>

<p><b>Proces zam√≥wienia w 3 krokach:</b></p>
<ol>
    <li>Dokonaj pomiaru.</li>
    <li>Skorzystaj z kalkulatora, aby poznaƒá natychmiastowƒÖ wycenƒô.</li>
    <li>Z≈Ç√≥≈º zam√≥wienie z wygodnƒÖ dostawƒÖ do Paczkomatu.</li>
</ol></p>
                </div>
                <button onclick="toggleDescription()" class="read-more-btn" id="readMoreBtn">Czytaj wiƒôcej...</button>

                <div class="calculator-container">
                    <h1>Kalkulator Ceny Online</h1>
                    <p>Podaj wymiary w centymetrach (cm), aby obliczyƒá ca≈Çkowity koszt szyby wraz z dostawƒÖ.</p>
                    
                    <label for="wysokosc">Wysoko≈õƒá szyby (cm):</label>
                    <input type="number" id="wysokosc" min="1" step="0.1" placeholder="np. 45.5" required>
                            
                    <label for="szerokosc">Szeroko≈õƒá szyby (cm):</label>
                    <input type="number" id="szerokosc" min="1" step="0.1" placeholder="np. 28.0" required>
            
                    <button onclick="obliczCeneSzyby()">OBLICZ CENƒò</button>
                    
                    <div id="wynik"></div>
            
                    <a href="#" class="buy-button-dynamic buy-button-disabled" id="buyButton">
                        ZAM√ìW SZYBƒò üîí (Aktywuj po obliczeniu)
                    </a>
                </div>
                
                <div class="trust-badges">
                    <div class="badge"><div class="badge-icon">üõ°Ô∏è</div>Bezpieczna P≈Çatno≈õƒá</div>
                    <div class="badge"><div class="badge-icon">üì¶</div>Szybka Wysy≈Çka</div>
                    <div class="badge"><div class="badge-icon">üåø</div>Gwarancja Jako≈õci</div>
                </div>

                <div class="question-section">
                    <h3>Masz pytanie dotyczƒÖce produktu?</h3>
                    <button class="question-btn" id="questionBtn">Zadaj pytanie</button>
                </div>
            </div>
        </div>
    </div>
    <div class="footer_section">
        <p>Sprzedawca: Amadeusz Wieczorek</p>
        <p>Grunwaldzka 10d/5</p>
        <p>Kontakt e-mail: amadeuszwieczorek@gmail.com</p>
        <p><a href="regulamin.html">Regulamin</a> | <a href="polityka-prywatnosci.html">Polityka Prywatno≈õci</a></p>
    </div>

    <div id="lightgallery-links">
        <a href="images/szyba1.jpg"></a>
        <a href="images/szyba2.jpg"></a>
        <a href="images/szyba3.jpg"></a>
        <a href="images/szyba4.jpg"></a>
    </div>
    
    <div id="questionModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="closeQuestionBtn">&times;</span>
            <h2>Zadaj pytanie</h2>
            <p>Masz wƒÖtpliwo≈õci? Chƒôtnie pomo≈ºemy. Odpowiemy na Twojego maila najszybciej jak to mo≈ºliwe.</p>
            <form action="https://formspree.io/f/mvgwqyop" method="POST">
                <input type="email" name="Email klienta" placeholder="Tw√≥j adres e-mail" required>
                <textarea name="Pytanie" placeholder="Twoje pytanie..." rows="6" required></textarea>
                <input type="hidden" name="_subject" value="Pytanie o produkt: Szyba Kominkowa">
                <button type="submit" class="buy-button">Wy≈õlij pytanie</button>
            </form>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.2/lightgallery.min.js"></script>
    <script>
        const galleryContainer = document.getElementById('lightgallery-links');
        const gallery = lightGallery(galleryContainer);
        let currentImageIndex = 0;
        function openGallery(index) {
            currentImageIndex = index;
            gallery.openGallery(index);
        }
        function changeImage(imageUrl, thumbElement, index) {
            document.getElementById('mainImage').src = imageUrl;
            currentImageIndex = index;
            document.querySelectorAll('.thumbnails img').forEach(thumb => thumb.classList.remove('active'));
            thumbElement.classList.add('active');
        }
        function toggleDescription() {
            const description = document.getElementById('productDescription');
            const btn = document.getElementById('readMoreBtn');
            description.classList.toggle('expanded');
            btn.textContent = description.classList.contains('expanded') ? 'Zwi≈Ñ opis' : 'Czytaj wiƒôcej...';
        }
        function toggleShippingDetails() {
            const details = document.getElementById('shippingDetails');
            details.classList.toggle('expanded');
        }
        function setupModal(modalId, btnId, closeBtnId) {
            const modal = document.getElementById(modalId);
            const btn = document.getElementById(btnId);
            const closeBtn = document.getElementById(closeBtnId);

            if(btn) { btn.onclick = function() { modal.style.display = "block"; } }
            if(closeBtn) { closeBtn.onclick = function() { modal.style.display = "none"; } }
            
            window.addEventListener('click', function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            });
        }

        // --- POCZƒÑTEK ZMIAN ---
        // Przywr√≥cenie sta≈Çych dla walidacji wymiar√≥w
        const MAX_SZYBA_DLUGOSC = 58;
        const MAX_SZYBA_SZEROKOSC = 32;
        // --- KONIEC ZMIAN ---

        function resetProductInfo() {
            const wynikDiv = document.getElementById('wynik');
            const buyButton = document.getElementById('buyButton');
            if (wynikDiv && buyButton) {
                wynikDiv.style.display = 'none';
                buyButton.textContent = 'ZAM√ìW SZYBƒò üîí (Aktywuj po obliczeniu)';
                buyButton.classList.add('buy-button-disabled');
                buyButton.onclick = null;
                buyButton.href = '#';
            }
        }

        async function obliczCeneSzyby() {
            const wynikDiv = document.getElementById('wynik');
            const buyButton = document.getElementById('buyButton');
            const calcButton = document.querySelector('.calculator-container button');
            
            const wysokosc = parseFloat(document.getElementById('wysokosc').value);
            const szerokosc = parseFloat(document.getElementById('szerokosc').value);

            resetProductInfo();
            wynikDiv.style.display = 'block';

            if (isNaN(wysokosc) || isNaN(szerokosc) || wysokosc <= 0 || szerokosc <= 0) {
                wynikDiv.className = 'wynik-error';
                wynikDiv.innerHTML = '‚ö†Ô∏è Proszƒô podaƒá poprawne, dodatnie wymiary w cm.';
                return;
            }
            
            // --- POCZƒÑTEK ZMIAN ---
            // Dodanie walidacji wymiar√≥w, aby pasowa≈Çy do paczkomatu
            const dluzszyBok = Math.max(wysokosc, szerokosc);
            const krotszyBok = Math.min(wysokosc, szerokosc);

            if (dluzszyBok > MAX_SZYBA_DLUGOSC || krotszyBok > MAX_SZYBA_SZEROKOSC) {
                wynikDiv.className = 'wynik-error';
                wynikDiv.innerHTML = `‚ö†Ô∏è Maksymalny wymiar szyby to ${MAX_SZYBA_DLUGOSC}x${MAX_SZYBA_SZEROKOSC} cm, aby zmie≈õci≈Ça siƒô do paczkomatu. Je≈õli chcesz zam√≥wiƒá wiƒôkszƒÖ szybƒô, skontaktuj siƒô z nami .`;
                return;
            }
            // --- KONIEC ZMIAN ---

            // Zastosowanie nowego wzoru do obliczenia ceny ca≈Çkowitej
            const cenaCalkowita = ((((wysokosc * szerokosc) / 100) * 8.5) * 1.7) + 12;
            const calculatedPrice = cenaCalkowita.toFixed(2);

            wynikDiv.className = 'wynik-ok';
            wynikDiv.innerHTML = `
                <strong>CA≈ÅKOWITY KOSZT: ${calculatedPrice} z≈Ç</strong><br>
                (Dostawa jest darmowa üöö)
            `;

            buyButton.classList.remove('buy-button-disabled');
            buyButton.textContent = `ZAM√ìW ZA ${calculatedPrice} Z≈Å`;
            
            buyButton.href = '#'; 
            buyButton.onclick = async () => {
                buyButton.textContent = 'Przekierowujƒô do p≈Çatno≈õci...';
                buyButton.classList.add('buy-button-disabled');
                calcButton.disabled = true;

                try {
                    const response = await fetch('/api/create-checkout-session', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            price: cenaCalkowita,
                            width: szerokosc,
                            height: wysokosc,
                        }),
                    });

                    const data = await response.json();

                    if (data.url) {
                        window.location.href = data.url;
                    } else {
                        alert('WystƒÖpi≈Ç b≈ÇƒÖd podczas tworzenia p≈Çatno≈õci. Spr√≥buj ponownie.');
                        resetProductInfo();
                    }
                } catch (error) {
                    console.error('B≈ÇƒÖd:', error);
                    alert('WystƒÖpi≈Ç b≈ÇƒÖd po≈ÇƒÖczenia. Sprawd≈∫ konsolƒô i spr√≥buj ponownie.');
                    resetProductInfo();
                } finally {
                    calcButton.disabled = false;
                }
            };
        }

        window.onload = () => {
            const firstThumbnail = document.querySelector('.thumbnails img');
            if(firstThumbnail) firstThumbnail.classList.add('active');
            document.getElementById('mainImage').addEventListener('click', () => {
                openGallery(currentImageIndex);
            });
            setupModal('questionModal', 'questionBtn', 'closeQuestionBtn');
            resetProductInfo();
        };

    </script>
</body>
</html>